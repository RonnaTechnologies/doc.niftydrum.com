{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"About NiftyDrum","text":""},{"location":"#description","title":"Description","text":"<p>NiftyDrum is a trigger-to-MIDI conversion module that transforms piezo and FSR sensor inputs into MIDI messages. Connect up to 9 piezo sensors and 1 FSR (Force Sensing Resistor) to the dedicated terminal blocks, then receive MIDI data via USB-C connection.</p>"},{"location":"#how-it-works","title":"How It Works","text":"<p>NiftyDrum delivers high-level MIDI performance in 4 easy steps:</p> <ul> <li>Connect sensors: Attach up to 9 piezo sensors and 1 FSR to the terminal blocks</li> <li>Plug in: Connect to your DAW, Raspberry Pi, or drum module via USB</li> <li>Configure: Use the web-based GUI to adjust trigger parameters, MIDI mapping, and velocity curves</li> <li>Play: Notes are transmitted instantly with imperceptible latency</li> </ul>"},{"location":"#specifications","title":"Specifications","text":""},{"location":"#hardware","title":"Hardware","text":"<ul> <li>Piezo inputs: 9 channels</li> <li>FSR input: 1 channel (hi-hat controller)</li> <li>Connector type: Terminal blocks</li> <li>USB interface: Type-C</li> <li>Dimensions: 65 \u00d7 56.5 mm</li> </ul>"},{"location":"#performance","title":"Performance","text":"<ul> <li>Latency: &lt;2.5 ms</li> <li>Sample rate: &gt;10 kHz</li> <li>Velocity resolution: 127 levels (full MIDI range)</li> </ul>"},{"location":"#software","title":"Software","text":"<ul> <li>Platform support: Windows, macOS, Linux</li> <li>User interface: Web-based application</li> <li>Firmware updates: Via USB</li> <li>MIDI output: Note messages and Control Changes (CC)</li> </ul>"},{"location":"1.board/","title":"The Board","text":""},{"location":"1.board/#description","title":"Description","text":"<p>The NiftyDrum board is shown in the following image.</p> <p></p> <p>This board features the following interfaces:</p> <ul> <li>Terminal blocks for sensor inputs</li> <li>USB Type-C port for laptop or PC connectivity</li> <li>9 potentiometers for sensitivity adjustment</li> <li>2 LEDs</li> <li>Reset button</li> <li>Raspberry Pi-compatible GPIO header</li> <li>4 mounting holes</li> </ul>"},{"location":"1.board/#connecting-sensors","title":"Connecting Sensors","text":"<p>The board provides 9 piezo inputs, supporting up to 9 single-zone pads, as well as 1 FSR input.</p>"},{"location":"1.board/#hi-hat-sensors","title":"Hi-Hat Sensors","text":"<p>On the left side of the board, two dedicated terminal blocks are reserved for hi-hat sensors:</p> <ul> <li>Top terminal block: Connects to an FSR (Force Sensing Resistor) sensor for hi-hat controller input</li> <li>Bottom terminal block: Connects to a piezo sensor for hi-hat cymbal trigger</li> </ul>"},{"location":"1.board/#standard-pads-and-cymbals","title":"Standard Pads and Cymbals","text":"<p>The remaining eight terminal blocks, located at the bottom of the board, are for connecting regular pads and cymbals. While the board labels indicate the default firmware assignments, these inputs are fully customizable.</p>"},{"location":"1.board/#important-notes","title":"Important Notes","text":"<ul> <li>For all terminal blocks, the ground pin is positioned on the left-hand side</li> <li>Nine onboard potentiometers enable hardware-level sensitivity adjustments for maximum flexibility</li> <li>If unsure about sensitivity settings, leave potentiometers at their midpoint for balanced performance</li> </ul>"},{"location":"1.board/#midi-outputs","title":"MIDI Outputs","text":"<p>The board offers two methods for transmitting MIDI notes and Control Changes:</p> <ul> <li>USB-C port: Outputs USB MIDI messages</li> <li>GPIO UART pins: Raspberry Pi GPIO-compatible interface</li> </ul>"},{"location":"1.board/#usb-c-port","title":"USB-C Port","text":"<p>Using NiftyDrum as a USB device is the recommended method for receiving MIDI messages. This configuration enables:</p> <ul> <li>Integration with DAW software for high-quality sound output from your laptop</li> <li>Control and configuration via the official app</li> </ul>"},{"location":"1.board/#raspberry-pi-hat-form-factor","title":"Raspberry-Pi hat form factor","text":"<p>The board is designed with a Raspberry Pi 4 HAT form factor, ensuring seamless integration.</p>"},{"location":"1.board/#app-features","title":"App Features","text":"<p>The official app provides comprehensive control over your NiftyDrum board:</p> <ul> <li>Customize MIDI note assignments for each trigger</li> <li>Design custom velocity curves per trigger</li> <li>Adjust advanced parameters including gain, threshold, scan time, mask time, and decay</li> <li>Update board firmware to the latest version</li> </ul>"},{"location":"2.app/","title":"The App","text":""},{"location":"2.app/#configure-niftydrum","title":"Configure NiftyDrum","text":"<p>App Usage: Configuration Only</p> <p>This app is designed only for configuration purposes. While running, it continuously transfers data between your PC and the board. For optimal performance, close the app before playing.</p> <p>NiftyDrum is fully configurable, allowing you to adjust parameters like scan time, mask time, decay, threshold, etc. To simplify customization, a dedicated desktop application is available, compatible with Windows, Linux, and macOS.</p> <p>Below are all the different commands the app can send to the board.</p>"},{"location":"2.app/#general-board-commands","title":"General Board Commands","text":"Command Description Reset Restart the board in bootloader mode Serial number Retrieve the board\u2019s unique serial number Version Retrieve the current firmware version Save current parameters Persist current settings to the board Load parameters Load previously saved board parameters Factory reset Reset all parameters to factory defaults"},{"location":"2.app/#trigger-parameters-per-trigger-including-hi-hat-cymbal","title":"Trigger Parameters (Per Trigger, Including Hi-Hat Cymbal)","text":"Parameter Description Set/get velocity curve Adjust or retrieve the velocity response curve Set/get threshold Configure the trigger activation threshold Scan time Set/get the trigger scan time Mask time Set or adjust the trigger mask time Decay time Adjust the decay time of the trigger Gain Adjust the gain level of the trigger MIDI Note Assign the MIDI note for the trigger"},{"location":"2.app/#hi-hat-pedal-parameters","title":"Hi-Hat Pedal Parameters","text":"Parameter Description Update interval Set the hi-hat pedal update frequency Noise threshold Ignore pedal changes below this value Pedal offset Determine if the hi-hat is fully closed Velocity threshold Set the velocity threshold for foot chick"},{"location":"2.app/#how-the-app-works","title":"How the app works","text":"<p>The app simplifies customization by organizing everything logically: instruments are selected via a drop-down, while MIDI notes and velocity curves are managed separately from trigger settings for a cleaner, more efficient setup.</p>"},{"location":"2.app/#how-to-install-the-app","title":"How to install the app","text":"<p>he app is available for Windows, macOS, and Linux and can be downloaded directly from the official NiftyDrum.com website. Follow the OS-specific instructions provided on the site.</p>"},{"location":"2.app/#windows","title":"Windows","text":"<p>On Windows, the app is distributed as a <code>.zip</code> file, so no installation is required, simply extract and run it. Note that, if that's not already done, you will have to install the Microsoft Visual C++ Redistributable package.</p>"},{"location":"2.app/#linux","title":"Linux","text":"<p>For Linux, the app is packaged as a <code>.deb</code> file. You can install it using your preferred package manager or by running the following command in a terminal:</p> Ubuntu 22.04Ubuntu 24.04debian <pre><code>sudo apt install --reinstall ./NiftyDrum-1.0.0-Ubuntu-22.04.deb\n</code></pre> <pre><code>sudo apt install --reinstall ./NiftyDrum-1.0.0-Ubuntu-24.04.deb\n</code></pre> <pre><code>sudo apt install --reinstall ./NiftyDrum-1.0.0-Linux.deb\n</code></pre>"},{"location":"2.app/#macos","title":"MacOS","text":"<p>The MacOS version of the app is provided as a <code>.zip</code> file. Just extract it and run the application. If you're using an Apple Silicon Mac, you may be prompted to install Rosetta the first time you launch the app.</p>"},{"location":"2.app/#piezo-trigger-configuration","title":"Piezo trigger configuration","text":"<p>Customize each piezo trigger by selecting your desired instrument from the dropdown menu. The screenshot below illustrates the process for configuring the snare drum.</p> <p> </p> <p>On the left side, you can assign the MIDI note for the pad, such as note 38 for the snare. Below the note input, you\u2019ll find the velocity curve editor, which uses B\u00e9zier controls for precise adjustments. You can drag and drop the endpoints and the two middle control points to shape the curve according to your needs. The horizontal axis reflects the raw MIDI velocity detected by the sensor, while the vertical axis shows the velocity value transmitted over USB. This setup lets you fine-tune the responsiveness and dynamics of your triggers.</p> <p>Moving from left to right, you can adjust the trigger gain within a range of 0.1 to 5. This allows you to boost the input sensitivity of the trigger, enhancing the volume of ghost notes when the velocity curve alone isn\u2019t sufficient. It\u2019s important to note that the gain is applied after a strike has been detected, so it doesn\u2019t impact the threshold setting.</p> <p>Next is the threshold setting, which sets the minimum signal level the piezo must exceed for a hit to register. This ensures only intentional strikes are detected, effectively filtering out unwanted noise and preventing false triggers.</p>"},{"location":"2.app/#hi-hat-pedal-configuration","title":"Hi-Hat Pedal Configuration","text":"<p>The last item in the dropdown menu is the hi-hat pedal configuration. Unlike other inputs, it does not include standard parameters like scan time or mask time.</p> <p>Hi-Hat Implementation Status</p> <p>The hi-hat implementation is currently experimental. The app settings may evolve in future updates.</p>"},{"location":"2.app/#parameters","title":"Parameters","text":"<p>The hi-hat pedal configuration includes four key parameters:</p> Parameter Description Update interval Sets the frequency at which the hi-hat pedal updates. Noise threshold Ignores pedal changes below this value to filter out noise. Pedal offset Determines whether the hi-hat is fully closed. Velocity threshold (Trig) Sets the sensitivity threshold for triggering a foot chick note. <p> </p>"},{"location":"2.app/#cc-message-behavior","title":"CC Message Behavior","text":"<ul> <li>The Update interval defines the minimum delay (in microseconds) between two CC messages, typically set to 10ms.</li> <li>The Noise threshold sets the minimum change in value required to send a CC message.</li> </ul>"},{"location":"2.app/#foot-chick-note-trigger","title":"Foot Chick Note Trigger","text":"<p>The Pedal offset and Velocity threshold (Trig) determine whether a foot chick note is sent, with the latter acting as a sensitivity threshold.</p>"},{"location":"2.app/#firmware-upgrade","title":"Firmware upgrade","text":"<p>The app also supports firmware upgrades for your board.</p> <p> </p> <p>Here is how to upgrade the firmware:</p> <ul> <li>From the app's main screen, click the \"gear\" icon to access the Advanced Settings screen.</li> <li>Select a firmware file (if downloaded as a <code>.zip</code>, unzip it first).</li> <li>Ensure the file has a <code>.bin</code> extension and is an officially supported firmware.</li> <li>Click the <code>Upload</code> button and wait for the process to complete.</li> </ul> <p> </p> <p>Warning</p> <p>Do not unplug the board during the firmware upload.</p> <p>Troubleshooting</p> <p>If the firmware upload fails or the board is accidentally unplugged. Download <code>tkg-flash</code>. Double-press the reset button on the board. Upload the firmware via terminal:</p> UnixWindows <pre><code>./tkg-flash NiftyDrum.bin\n</code></pre> <pre><code>./tkg-flash.exe NiftyDrum.bin\n</code></pre> <p>Once the upload is complete, the board will restart automatically, and the app will reconnect to it.</p>"},{"location":"3.serial/","title":"Serial Protocol","text":""},{"location":"3.serial/#overview","title":"Overview","text":"<p>The NiftyDrum board establishes a virtual serial port over USB when connected to a computer. It also features a USART interface on the Raspberry Pi-compatible GPIO port.</p> <p>USART Voltage Limit</p> <p>The USART pins are 3.3V only. Exceeding this voltage may damage the board.</p>"},{"location":"3.serial/#command-syntax","title":"Command Syntax","text":""},{"location":"3.serial/#special-commands","title":"Special Commands","text":"Command Description <code>/reset</code> Reboots the board in bootloader mode. <code>/factory_reset</code> Resets all settings to factory defaults. <code>/sn</code> Returns the board's serial number. <code>/version</code> Returns the current firmware version."},{"location":"3.serial/#parameters-commands","title":"Parameters Commands","text":"Command Description <code>/load params all</code> Loads all parameters from EEPROM. <code>/save params all</code> Saves all current parameters to EEPROM."},{"location":"3.serial/#pad-parameters","title":"Pad Parameters","text":"<p>Instrument Placeholder</p> <p>The examples below use <code>snare</code>. Replace it with <code>hihat</code>, <code>kick</code>, <code>crash1</code>, <code>tom1</code>, <code>tom3</code>, <code>ride</code>, <code>tom2</code>, or <code>crash2</code> as needed.</p>"},{"location":"3.serial/#getters","title":"Getters","text":"Command Description Example Reply <code>/get snare threshold</code> Gets the trigger threshold. <code>15</code> <code>/get snare gain</code> Gets the sensor gain. <code>1.5</code> <code>/get snare scan</code> Gets the scan time (\u00b5s). <code>3000</code> (3ms) <code>/get snare mask</code> Gets the mask time (\u00b5s). <code>20000</code> (20ms) <code>/get snare decay</code> Gets the decay time (\u00b5s). <code>60000</code> (60ms) <code>/get snare note</code> Gets the MIDI note assigned to the pad. <code>36</code>"},{"location":"3.serial/#setters","title":"Setters","text":"Command Description Example Usage <code>/set snare threshold</code> Sets the trigger threshold. <code>/set snare threshold 15</code> <code>/set snare gain</code> Sets the sensor gain. <code>/set snare gain 1.5</code> <code>/set snare scan</code> Sets the scan time (\u00b5s). <code>/set snare scan 3000</code> <code>/set snare mask</code> Sets the mask time (\u00b5s). <code>/set snare mask 20000</code> <code>/set snare decay</code> Sets the decay time (\u00b5s). <code>/set snare decay 60000</code> <code>/set snare note</code> Sets the MIDI note for the pad. <code>/set snare note 36</code> <p>Value Validation</p> <p>The board does not validate input values. Incorrect values may cause unexpected behavior.</p>"},{"location":"3.serial/#hi-hat-controller-parameters","title":"Hi-Hat Controller Parameters","text":""},{"location":"4.arduino/","title":"Arduino","text":""},{"location":"5.videos/","title":"Video Tutorials","text":""}]}